# AI文档分析功能说明

## 功能概述

新增的AI文档分析功能基于你提供的流程图实现，位于导航菜单中"资料检查"和"系统日志"之间。此功能接入Coze API，能够智能分析输入的文档内容，检测各种问题并输出相关的修改建议。

## 功能特点

### 📤 多种输入方式
- **文档上传**：支持拖拽上传DOC、DOCX、PDF、TXT格式文件
- **文本直接输入**：支持直接粘贴或输入文档内容
- **实时预览**：显示已选择文件的基本信息

### 🤖 AI智能分析
- **漏填项检测**：自动识别缺失的必填字段和信息
- **文字错误检查**：检测拼写错误、语法问题等
- **格式规范检查**：验证文档格式是否符合标准
- **图片缺失检测**：识别应有但缺失的图片位置

### 📊 可视化结果展示
- **问题统计**：分类统计各种问题的数量
- **详细报告**：具体定位问题的页码和行数
- **修改建议**：为每个问题提供具体的修改建议
- **进度显示**：实时显示分析进度和当前步骤

## 路由信息

- **页面路径**：`/main/document-analysis`
- **页面文件**：`pages/main/document-analysis.vue`
- **API接口**：`/api/coze/analyze`

## Coze API 集成

### 环境配置

在`.env`文件中配置以下变量：

```env
COZE_API_KEY=your_coze_api_key_here
COZE_API_URL=https://api.coze.cn/v1/workflow/run
COZE_WORKFLOW_ID=your_workflow_id_here
```

### API接口

- **端点**：`POST /api/coze/analyze`
- **请求体**：
  ```json
  {
    "content": "文档内容",
    "type": "file|text"
  }
  ```
- **响应格式**：
  ```json
  {
    "success": true,
    "result": {
      "missingCount": 3,
      "errorCount": 2,
      "formatCount": 1,
      "imageCount": 1,
      "missingFields": [...],
      "textErrors": [...],
      "formatIssues": [...],
      "missingImages": [...]
    }
  }
  ```

## 分析结果类型

### 1. 漏填项 (Missing Fields)
- 检测缺失的必填字段
- 提供具体的页码和行数定位
- 描述应该填写的内容

### 2. 文字错误 (Text Errors)
- 拼写错误检测
- 语法问题识别
- 提供修改建议

### 3. 格式问题 (Format Issues)
- 标题格式检查
- 段落结构验证
- 数字格式统一性检查

### 4. 缺失图片 (Missing Images)
- 识别应有图片的位置
- 检测图片引用错误
- 提示需要补充的图片类型

## 使用流程

1. **选择输入方式**：上传文档文件或直接输入文本
2. **启动分析**：点击"开始AI分析"按钮
3. **等待处理**：观看分析进度条和步骤提示
4. **查看结果**：查看分类统计和详细问题列表
5. **导出报告**：可导出JSON格式的分析报告
6. **问题修正**：根据建议修正文档问题

## 技术架构

- **前端**：Vue 3 + Nuxt 3
- **后端**：Nuxt Server API
- **AI服务**：Coze API集成
- **文件处理**：原生File API
- **UI组件**：Tailwind CSS

## 注意事项

1. **文件大小限制**：支持最大10MB的文件上传
2. **文本长度限制**：直接输入最多支持10000字符
3. **API配额**：请注意Coze API的调用限制
4. **错误处理**：API失败时会显示模拟结果用于演示

## 未来扩展

- [ ] 支持更多文档格式
- [ ] 批量文档分析
- [ ] 自定义检查规则
- [ ] 历史分析记录
- [ ] 分析结果对比
- [ ] 多语言支持
